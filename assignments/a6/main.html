<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
<!--

  91.461 Assignment 6: Creating a Dynamic Table With JQuery Validation
  Corey Prak, UMass Lowell Computer Science, corey_prak@student.uml.edu
  Copyright (c) 2013 by Corey Prak.  All rights reserved.
  Created by CP on November 7th, 2013

  NOTES:
  
  CREDITS:

  http://jqueryvalidation.org/
  Host for jQuery Valication Plugin which this assignment includes, "jquery.validate.min.js". The location of the plugin file: http://ajax.aspnetcdn.com/ajax/jquery.validate/1.11.1/jquery.validate.min.js

  https://teaching.cs.uml.edu/~heines/91.461/91.461-2012-13f/461-assn/formutilities.js
  Jesse Heines, for allowing me to use his Javascript file, which I have inluded in my js directory as formutilities.js

  http://www.w3schools.com/js/js_popup.asp
  Popup used for debugging.

  http://stackoverflow.com/questions/9716468/is-there-any-function-like-isnumeric-in-javascript-to-validate-numbers
  Javascript function isNumeric is credited to user Sudhir of StackOverflow.

  http://www.w3schools.com/js/js_form_validation.asp
  Javascript form validation information.

  http://www.w3schools.com/html/html_tables.asp
  Knowledge of Javascript tables. 
-->

<title>Corey Prak, GUI Assignment 6</title>
  <!-- <meta http-equiv="refresh" content="3"> -->

<link rel="stylesheet" href="../../css/styles.css">

<link rel="stylesheet" href="css/styles.css">

<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>

<script src="js/formutilities.js"></script>
 
<script src="js/jquery.validate.min.js"></script>

<script type="text/javascript">
  $(document).ready(function(){

    <!-- Background of active field will become yellow, visually indicating an active field. -->
    $('input').focusin(function(){
      $(this).css("background-color", "#FFFFCC");
    });

    <!-- Background of field leaving focus will return to default white, visually indicating a loss of 'focus' -->
    $('input').focusout(function(){
      $(this).css("background-color", "white");
    });

    
    var ruleReqNum = {
          required: true, 
          number: true,
        };

    var ruleReqNumEndGreater = {
        required: true, 
        number: true,
        ruleH2GreaterThanH1: true
      };

    var messageReqNum = {
          required: "Field must be completed!", 
          number: "Please enter a valid number."
        };

    jQuery.validator.addMethod("ruleH2GreaterThanH1", function(value, element){
                                                        var startingVal = 0;

                                                        if($(element).attr("name") == 'h2'){
                                                          startingVal = $('#h1').val();
                                                        }

                                                        else if($(element).attr("name") == 'v2'){
                                                          startingVal = $('#v1').val();
                                                        }

                                                        if (parseInt(startingVal) > parseInt(value)){
                                                          return false;  
                                                        }

                                                        return true;
                                                      },
                                                      "End value must be greater than corresponding ystart value.");
    $('#tableForm').validate({

      rules:{
        h1: ruleReqNum,
        h2: ruleReqNumEndGreater, 
        v1: ruleReqNum, 
        v2: ruleReqNumEndGreater,
      },

      messages:{
        h1: messageReqNum, 
        h2: messageReqNum,
        v1: messageReqNum, 
        v2: messageReqNum
      }, 

      errorPlacement: function(error, element){
        error.appendTo(element.parent().next());
      }


    });

  });
</script>

</head>

<!-- As soon as page loads, populate table based on URL if there is data to parse. The generateTable returns if the URL is void of any form data. -->
<body>
  
<a href="../../index.html">Back to main page...</a>
  
  <div class="centerContent">
    <h1 class="solidBorder">Corey Prak, Assignment 6: Creating a Dynamic Table</h1>
    
    <a href="">HTML5</a> + <a href="http://jigsaw.w3.org/css-validator/check/referer">CSS3</a> validated!
  </div>
  
  <div class="formCenter">
      <form name="tableForm" id="tableForm" method="GET" action="main.html" onsubmit="return drawTable()">
        <table>
          <tr>
            <td>Row Start:</td>
            <td><input type="text" name="h1" id='h1' class="required number"></td>
            <td></td>
          </tr>
          <tr>
            <td>Row End:</td>
            <td><input type="text" name="h2" id='h2'></td>
            <td></td>      
          </tr>
          <tr>
            <td>Column Start:</td>
            <td><input type="text" name="v1" id='v1'></td>
            <td></td>
          </tr>
          <tr>
            <td>Column End:</td>
            <td><input type="text" name="v2" id='v2'></td>
            <td></td>
          </tr>
          <tr>
            <td><input type="submit" value="Generate Table"></td>
            <td></td>
          </tr>
        </table>
      </form>
    </div>
    
  <div id="tableContent"></div>
    
</body>
</html>
